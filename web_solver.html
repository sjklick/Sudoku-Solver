<!DOCTYPE html>
<html>
    <head>
        <title>Soduko-Solver</title>
        <style>
            .sudoku-puzzle {
                background-color: black;
                width: 368px;
                height: 368px;
                display: grid;
                grid-template-columns: 122px 122px 122px;
                grid-template-rows: 122px 122px 122px;
                grid-column-gap: 1px;
                grid-row-gap: 1px;
                padding: 1px;
            }
            .sudoku-square {
                background-color: white;
                color: black;
                font-size: 16px;
                width: 40px;
                height: 40px;
                border: none;
            }
            .sudoku-block {
                background-color: #c0c0c0; /* HTML Silver */
                width: 122px;
                height: 122px;
                display: grid;
                grid-template-columns: 40px 40px 40px;
                grid-template-rows: 40px 40px 40px;
                grid-column-gap: 1px;
                grid-row-gap: 1px;
            }
            .value-options {
                width: 368px;
                height: 42px;
                display: grid;
                grid-template-columns: 40px 40px 40px 40px 40px 40px 40px 40px 40px;
                grid-column-gap: 1px;
                padding: 1px;
            }
            .value-button-unselected {
                border: none;
                background-color: #c0c0c0; /* HTML Silver */
                color: black;
                font-size: 16px;
                width: 40px;
                height: 40px;
            }
            .value-button-selected {
                border: 1px solid black;
                background-color: #c0c0c0; /* HTML Silver */
                color: black;
                font-size: 16px;
                width: 40px;
                height: 40px;
            }
        </style>
    </head>
    <body>
        <div class="sudoku-puzzle">
            <div class="sudoku-block" id="0,0">
                <button class="sudoku-square" id="0,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,2" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="0,1">
                <button class="sudoku-square" id="0,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,5" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="0,2">
                <button class="sudoku-square" id="0,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="0,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="1,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="2,8" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="1,0">
                <button class="sudoku-square" id="3,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,2" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="1,1">
                <button class="sudoku-square" id="3,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,5" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="1,2">
                <button class="sudoku-square" id="3,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="3,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="4,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="5,8" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="2,0">
                <button class="sudoku-square" id="6,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,2" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,0" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,1" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,2" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="2,1">
                <button class="sudoku-square" id="6,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,5" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,3" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,4" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,5" onclick="enter_value(this);"></button>
            </div>
            <div class="sudoku-block" id="2,2">
                <button class="sudoku-square" id="6,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="6,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="7,8" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,6" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,7" onclick="enter_value(this);"></button>
                <button class="sudoku-square" id="8,8" onclick="enter_value(this);"></button>
            </div>
        </div>
        <div class="value-options">
            <button class="value-button-selected" id="1" onclick="value_select(this);">1</button>
            <button class="value-button-unselected" id="2" onclick="value_select(this);">2</button>
            <button class="value-button-unselected" id="3" onclick="value_select(this);">3</button>
            <button class="value-button-unselected" id="4" onclick="value_select(this);">4</button>
            <button class="value-button-unselected" id="5" onclick="value_select(this);">5</button>
            <button class="value-button-unselected" id="6" onclick="value_select(this);">6</button>
            <button class="value-button-unselected" id="7" onclick="value_select(this);">7</button>
            <button class="value-button-unselected" id="8" onclick="value_select(this);">8</button>
            <button class="value-button-unselected" id="9" onclick="value_select(this);">9</button>
        </div>
        <button id="clear" onclick="clear_grid();">Clear</button>
        <button id="solve" onclick="solve();">Solve</button>
        <p>
            Author: Steven Joshua Klickermann<br>
            Email: sjklickermann@gmail.com
        </p>
        <script type="text/javascript">
            var value_selection = 1;

            function clear_grid() {
                var sudoku_square = document.getElementsByClassName("sudoku-square");
                var square_index;
                for (square_index=0; square_index< 9*9; square_index++) {
                    sudoku_square[square_index].innerText = "";
                }
            }

            function value_select(value_button) {
                document.getElementsByClassName("value-button-selected")[0].className = "value-button-unselected";
                value_button.className = "value-button-selected";
                value_selection = parseInt(value_button.id);
            }

            function enter_value(sudoku_square) {
                if (sudoku_square.innerText == "") {
                    sudoku_square.innerText = value_selection.toString();
                } else {
                    sudoku_square.innerText = "";
                }
            }

            function get_initial_options() {
                var row, column,value;
                var row_options = [];
                for (row=0; row<9; row++) {
                    row_options[row] = [];
                    for (value=1; value<10; value++) {
                        row_options[row].push(parseInt(value));
                    }
                }
                var column_options = [];
                for (column=0; column<9; column++) {
                    column_options[column] = [];
                    for (value=1; value<10; value++) {
                        column_options[column].push(parseInt(value));
                    }
                }
                var block_options = [];
                for (row=0; row<3; row++) {
                    block_options[row] = [];
                    for (column=0; column<3; column++) {
                        block_options[row][column] = [];
                        for (value=1; value<10; value++) {
                            block_options[row][column].push(parseInt(value));
                        }
                    }
                }
                var square_options = [];
                for (row=0; row<9; row++) {
                    square_options[row] = [];
                    for (column=0; column<9; column++) {
                        square_options[row][column] = [];
                        for (value=1; value<10; value++) {
                            square_options[row][column].push(parseInt(value));
                        }
                    }
                }
                return {
                    row: row_options,
                    column: column_options,
                    block: block_options,
                    square: square_options
                };
            }

            function update_options(options, puzzle) {
                var row, column, block_row, block_column, value, array_index;
                for (row=0; row<9; row++) {
                    for (column=0; column<9; column++) {
                        value = puzzle[row][column];
                        if (value != "") {
                            for (array_index=0; array_index<options.row[row].length; array_index++) {
                                if (options.row[row][array_index] == value) {
                                    options.row[row].splice(array_index, 1);
                                    break;
                                }
                            }
                            for (array_index=0; array_index<options.column[column].length; array_index++) {
                                if (options.column[column][array_index] == value) {
                                    options.column[column].splice(array_index, 1);
                                    break;
                                }
                            }
                            block_row = Math.trunc(row/3);
                            block_column = Math.trunc(column/3);
                            for (array_index=0; array_index<options.block[block_row][block_column].length; array_index++) {
                                if (options.block[block_row][block_column][array_index] == value) {
                                    options.block[block_row][block_column].splice(array_index, 1);
                                    break;
                                }
                            }
                        }
                    }
                }
                var is_row_option, is_column_option, is_block_option, option_index;
                for (row=0; row<9; row++) {
                    for (column=0; column<9; column++) {
                        block_row = Math.trunc(row/3);
                        block_column = Math.trunc(column/3);
                        for (value=1; value<10; value++) {
                            is_row_option = false;
                            for (option_index=0; option_index<options.row[row].length; option_index++) {
                                if (options.row[row][option_index] == value.toString()) {
                                    is_row_option = true;
                                    break;
                                }
                            }
                            is_column_option = false;
                            for (option_index=0; option_index<options.column[column].length; option_index++) {
                                if (options.column[column][option_index] == value.toString()) {
                                    is_column_option = true;
                                    break;
                                }
                            }
                            is_block_option = false;
                            for (option_index=0; option_index<options.block[block_row][block_column].length; option_index++) {
                                if (options.block[block_row][block_column][option_index] == value.toString()) {
                                    is_block_option = true;
                                    break;
                                }
                            }
                            if (!(is_row_option && is_column_option && is_block_option)) {
                                for (array_index=0; array_index<options.square[row][column].length; array_index++) {
                                    if (options.square[row][column][array_index] == value.toString()) {
                                        options.square[row][column].splice(array_index, 1);
                                        break;
                                    }
                                }
                            }
                        }
                    }
                }
                for (row=0; row<9; row++) {
                    for (column=0; column<9; column++) {
                        value = puzzle[row][column];
                        if (value != "") {
                            options.square[row][column] = [];
                            options.square[row][column].push(value);
                        }
                    }
                }
            }

            function update_solution(options, puzzle) {         
                var row, column, modified;
                modified = false;
                for (row=0; row<9; row++) {
                    for (column=0; column<9; column++) {
                        if (options.square[row][column].length == 1) {
                            if (puzzle[row][column] == "") {
                                puzzle[row][column] = options.square[row][column][0];
                                modified = true;
                            }
                        }
                    }
                }
                return modified;
            }

            function print_options(options) {
                var row, column, console_str, index;
                for (row=0; row<9; row++) {
                    console_str="row["+row.toString()+"]:";
                    for (index=0; index<options.row[row].length; index++) {
                        console_str=console_str+" "+options.row[row][index];
                    }
                    console.log(console_str);
                }
                for (column=0; column<9; column++) {
                    console_str="column["+column.toString()+"]:";
                    for (index=0; index<options.column[column].length; index++) {
                        console_str=console_str+" "+options.column[column][index];
                    }
                    console.log(console_str);
                }
                for (row=0; row<3; row++) {
                    for (column=0; column<3; column++) {
                        console_str="block["+row.toString()+"]["+column.toString()+"]:";
                        for (index=0; index<options.block[row][column].length; index++) {
                            console_str=console_str+" "+options.block[row][column][index];
                        }
                        console.log(console_str);
                    }
                }
                for (row=0; row<9; row++) {
                    for (column=0; column<9; column++) {
                        console_str="square["+row.toString()+"]["+column.toString()+"]:";
                        for (index=0; index<options.square[row][column].length; index++) {
                            console_str=console_str+" "+options.square[row][column][index];
                        }
                        console.log(console_str);
                    }
                }
            }

            function solve() {
                var grid = [];
                var row, column;
                for (row=0; row<9; row++) {
                    grid[row] = [];
                }
                var sudoku_square = document.getElementsByClassName("sudoku-square");
                var square_index, id_string;
                for (square_index=0; square_index<9*9; square_index++) {
                    id_string = sudoku_square[square_index].id;
                    row = parseInt(id_string[0]);
                    column = parseInt(id_string[2]);
                    grid[row][column] = sudoku_square[square_index].innerText;
                }
                option = get_initial_options();             
                var keep_iterating = true;
                while (keep_iterating) {
                    update_options(option, grid);
                    keep_iterating = update_solution(option, grid);
                }
                for (square_index=0; square_index<9*9; square_index++) {
                    id_string = sudoku_square[square_index].id;
                    row = parseInt(id_string[0]);
                    column = parseInt(id_string[2]);
                    sudoku_square[square_index].innerText = grid[row][column];
                }
            }
        </script>
    </body>
</html>
